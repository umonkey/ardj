<html><head><meta http-equiv="Content-Type" content="text/html; charset="><title>Настройка сторонних программ</title><link rel="stylesheet" href="screen.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"><link rel="home" href="index.html" title="ardj"><link rel="up" href="settings.html" title="Глава 3. Настройка"><link rel="prev" href="listener-count.html" title="Доступ к количеству слушателей"><link rel="next" href="programming.html" title="Глава 4. Программирование эфира"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Настройка сторонних программ</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="listener-count.html">Пред.</a> </td><th width="60%" align="center">Глава 3. Настройка</th><td width="20%" align="right"> <a accesskey="n" href="programming.html">След.</a></td></tr></table><hr></div><div class="section" title="Настройка сторонних программ"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="third-party"></a>Настройка сторонних программ</h2></div></div></div><p>В этой секции описана настройка программ, часто используемых вместе с ardj, но не имеющих к нему
      отношения.</p><div class="section" title="Загрузка музыки по протоколу SFTP"><div class="titlepage"><div><div><h3 class="title"><a name="upload-sftp"></a>Загрузка музыки по протоколу SFTP</h3></div></div></div><p>Протокол SFTP является безопасным аналогом протокола FTP, работающим
	поверх SSH.  Для того, чтобы предоставить пользователям возможность
	безопасно (для сервера) загружать музыку, следует создать специального
	пользователя — назовём его "ardj-uploader" — для которого домашней папкой
	будет <code class="filename">/var/lib/ardj/incoming</code>, добавить его в группу
	"ardj", а в файл <code class="filename">/etc/ssh/sshd_config</code> добавить такие
	строки:</p><pre class="programlisting">Match Group ardj
ChrootDirectory %h
ForceCommand internal-sftp
AllowTcpForwarding no</pre><p>Теперь пользователь ardj-uploader может подключаться к серверу по протоколу SFTP и может складывать файлы
	в папку incoming; подключаться по SSH, загружать файлы в другие папки или доставать их оттуда он не
	может.</p></div><div class="section" title="Настройка ezstream и sox"><div class="titlepage"><div><div><h3 class="title"><a name="ezstream-sox"></a>Настройка ezstream и sox</h3></div></div></div><p>В базовой конфигурации ezstream <a class="ulink" href="http://svn.xiph.org/trunk/ezstream/examples/ezstream_reencode_mp3.xml" target="_top">рекомендуется</a>
  для декодирования файлов использовать специализированные утилиты для каждого
  формата: oggdec, madplay, flac.  Этот вариант плох по двум причинам.
  Во-первых, эти утилиты не поддерживают <a class="ulink" href="http://ru.wikipedia.org/wiki/Replay_Gain" target="_top">ReplayGain</a>, что для
  радиостанции критично.  Во-вторых, не все их них поддерживают ресэмплинг, от
  чего монофонические файлы, если они попадаются в плейлисте, звучат ввое
  быстрее.</p><p>Эту проблему можно решить использованием в качестве декодера утилиты
  <a class="ulink" href="http://sox.sourceforge.net/" target="_top">sox</a>.  Дополнительным
  преимуществом является простота: sox — это одна утилита, поддерживающая все
  форматы.</p><p>Для использования sox замените все описания декодеров в файле
  <code class="filename">/etc/ezstream.xml</code> на следующее:</p><pre class="programlisting">&lt;decode&gt;sox --replay-gain track "@T@" -r 44100 -c 2 -t raw -e signed-integer -&lt;/decode&gt;</pre></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="listener-count.html">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="settings.html">Уровень выше</a></td><td width="40%" align="right"> <a accesskey="n" href="programming.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">Доступ к количеству слушателей </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> Глава 4. Программирование эфира</td></tr></table></div></body></html>
