<html><head><meta http-equiv="Content-Type" content="text/html; charset="><title>Подмотка</title><link rel="stylesheet" href="screen.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"><link rel="home" href="index.html" title="ardj"><link rel="up" href="programming.html" title="Глава 4. Программирование эфира"><link rel="prev" href="queue.html" title="Управление очередью (заказы)"><link rel="next" href="usage.html" title="Глава 5. Использование"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Подмотка</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="queue.html">Пред.</a> </td><th width="60%" align="center">Глава 4. Программирование эфира</th><td width="20%" align="right"> <a accesskey="n" href="usage.html">След.</a></td></tr></table><hr></div><div class="section" title="Подмотка"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="preroll"></a>Подмотка</h2></div></div></div><p>Подмотка (англ. preroll) — это композиция, автоматически вставляемая в плейлист перед композицией, которая
      была выбрана в соответствие с его настройками.  Подмотка используется для акцентирования внимания на конкретных
      композициях (например, если у исполнителя скоро концерт).</p><p>Есть два способа настройки подмотки.  Они сводятся к определению меток, по которым выбирается случайный
      файл, который и является подмоткой (подробности описаны в подразделах).  Оба метода используются всегда: сначала
      собираются метки для плейлиста, затем
      - метки для текущей композиции, по ним выбирается случайная композиция, которая и является подмоткой.</p><div class="section" title="Подмотка для плейлиста"><div class="titlepage"><div><div><h3 class="title"><a name="preroll-playlist"></a>Подмотка для плейлиста</h3></div></div></div><p>Подмотка на уровне плейлиста создаётся с помощью <a class="link" href="programming.html#preroll-playlist-option">свойстве preroll</a>
  плейлиста.  В этом свойстве указывается список меток, по которым выбирается подмотка.  Пример настройки
  плейлиста:</p><pre class="programlisting">- name: heavy_music
  labels: [music, +heavy]
  preroll: [heavy-preroll]
  delay: 30</pre><p>В такой конфигурации в плейлист попадут композиции с метками "music" и "heavy", а перед ними будет каждый раз
  звучать случайная композиция с меткой "heavy-preroll".</p></div><div class="section" title="Подмотка для меток"><div class="titlepage"><div><div><h3 class="title"><a name="preroll-labels"></a>Подмотка для меток</h3></div></div></div><p>Подмотка на уровне меток используется в случаях, когда она нужна в нескольких или во всех плейлистах сразу, но
  не обязательно для всех композиций.  С помощью этой функции можно, в частности, создать подмотку для отдельной
  композиции (например, для результата работы команды <a class="link" href="jabber-commands.html#jabber-speak"><span class="command"><strong>speak</strong></span></a>).</p><p>Для выбора подмотки этого уровня ко всем меткам композиции добавляется суффикс "-preroll" и выбирается случайный
  файл с одной из полученных меток.  Например, если из плейлиста была выбрана композиция с метками "rock", "female" и
  "vocals", подмотка будет выбираться по меткам "rock-preroll", "female-preroll" и "vocals-preroll" (достаточно одной из
  них).</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="queue.html">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="programming.html">Уровень выше</a></td><td width="40%" align="right"> <a accesskey="n" href="usage.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">Управление очередью (заказы) </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> Глава 5. Использование</td></tr></table></div></body></html>
